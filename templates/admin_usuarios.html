{% extends "layout.html" %}
{% block content %}
<div class="card stack">
  <h2>Usuarios</h2>

  <form method="post" action="{{ url_for('admin.usuarios_create') }}" class="stack max-720">
    <div class="row">
      <div class="field">
        <label for="username">Usuario</label>
        <input id="username" name="username" required>
      </div>
      <div class="field">
        <label for="password">Contraseña</label>
        <input id="password" name="password" type="password" required>
      </div>
      <div class="field">
        <label for="role">Rol</label>
        <select id="role" name="role">
          <option value="agente">agente</option>
          <option value="supervisor">supervisor</option>
          <option value="gerente">gerente</option>
          <option value="admin">admin</option>
        </select>
      </div>
      <div class="field">
        <label for="activo">Activo</label>
        <input id="activo" type="checkbox" name="activo" checked>
      </div>
    </div>
    <div class="actions">
      <button type="submit">Crear usuario</button>
    </div>
  </form>

  <div class="table-wrap">
    <table>
      <thead>
        <tr><th>ID</th><th>Usuario</th><th>Rol</th><th>Activo</th><th>Creado</th></tr>
      </thead>
      <tbody>
        {% for u in usuarios %}
          <tr>
            <td>{{ u.id }}</td>
            <td>{{ u.username }}</td>
            <td>{{ u.role }}</td>
            <td>{{ 'Sí' if u.activo else 'No' }}</td>
            <td>{{ u.creado_en }}</td>
          </tr>
        {% else %}
          <tr><td colspan="5" class="table-empty">Sin usuarios registrados.</td></tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>
{% endblock %}
